version: '3'

tasks:
  list:agents:
    desc: エージェント一覧を表示
    cmds:
      - ls -1 {{.ORCHESTRA_DIR}}/agents/*.md | xargs -n1 basename | sed 's/.md$//'

  list:hooks:
    desc: フック一覧を表示（パッケージ別）
    cmds:
      - |
        for pkg in {{.ORCHESTRA_DIR}}/packages/*/; do
          hooks=$(ls "$pkg/hooks/"*.py 2>/dev/null | grep -v __pycache__ | grep -v _common || true)
          if [ -n "$hooks" ]; then
            echo "$(basename "$pkg"):"
            echo "$hooks" | xargs -n1 basename | sed 's/^/  /'
          fi
        done

  list:skills:
    desc: スキル一覧を表示
    cmds:
      - ls -1 {{.ORCHESTRA_DIR}}/skills/ 2>/dev/null || echo "No skills"
